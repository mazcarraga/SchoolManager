<!DOCTYPE html>
<html>
  <head>
    <title>MWI University</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  </head>

  <body>
    <nav id="top-navbar" class="top-bar py-1">
      <div class="container d-flex justify-content-between align-items-center">
        <div class="manager-left d-flex gap-4">
          <span class="manager-label"><i class="fa-solid fa-table-cells-large me-2"></i>School Manager</span>
          <ul class="nav manager-links d-none d-md-flex">
            <li class="nav-item">
              <%= link_to "Departments", departments_path, class: "nav-link #{'active' if current_page?(departments_path)}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Teachers", teachers_path, class: "nav-link #{'active' if current_page?(teachers_path)}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Students", students_path, class: "nav-link #{'active' if current_page?(students_path)}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Sections", sections_path, class: "nav-link #{'active' if current_page?(sections_path)}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Subjects", subjects_path, class: "nav-link #{'active' if current_page?(subjects_path)}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Classlists", classlists_path, class: "nav-link #{'active' if current_page?(classlists_path)}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Staffs", staffs_path, class: "nav-link #{'active' if current_page?(staffs_path)}" %>
            </li>
            <li class="nav-item">
              <%= link_to "Guardians", guardians_path, class: "nav-link #{'active' if current_page?(guardians_path)}" %>
          </ul>
        </div>
      </div>
    </nav>

    <nav id="main-navbar" class="navbar navbar-expand-lg sticky-top main-navbar">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
          <%= image_tag "Logo(2).png", alt: "MWI Logo", class: "navbar-logo" %>
          <span class="brand-text ms-2">MWI University</span>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
            <li class="nav-item"><%= link_to "Home", root_path, class: "nav-link #{'active' if current_page?(root_path)}" %></li>
            <li class="nav-item"><%= link_to "About", about_path, class: "nav-link #{'active' if current_page?(about_path)}" %></li>
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Admission</a>
              <ul class="dropdown-menu">
                <li><%= link_to "Requirements", "#", class: "dropdown-item" %></li>
                <li><%= link_to "Process", "#", class: "dropdown-item" %></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Academics</a>
              <ul class="dropdown-menu">
                <li><%= link_to "Sections", sections_path, class: "dropdown-item" %></li>
                <li><%= link_to "Subjects", subjects_path, class: "dropdown-item" %></li>
              </ul>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Campus Life</a>
              <ul class="dropdown-menu">
                <li><%= link_to "Sections", sections_path, class: "dropdown-item" %></li>
                <li><%= link_to "Subjects", subjects_path, class: "dropdown-item" %></li>
              </ul>
            </li>

            <li class="nav-item ms-lg-3">
              <%= link_to "Apply Now", "#", class: "apply-btn" %>
            </li>
          </ul>
        </div>
      </div>
    </nav>

<%= yield %> 
<!-- Bootstrap JS CDN (Optional for dropdowns, nav, etc.) --> 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  const handleNavbarScroll = () => {
    const body = document.body;
    const scrollThreshold = 60;

    if (window.scrollY > scrollThreshold) {
      body.classList.add('scrolled');
    } else {
      body.classList.remove('scrolled');
    }
  };

  const initNavbar = () => {
    // Add scroll listener
    window.addEventListener('scroll', handleNavbarScroll);
    
    // Handle mobile menu close on link click
    const navLinks = document.querySelectorAll('.navbar-nav .nav-link:not(.dropdown-toggle)');
    const menuToggle = document.getElementById('mainNav');
    const bsCollapse = new bootstrap.Collapse(menuToggle, { toggle: false });

    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth < 992) bsCollapse.hide();
      });
    });
  };

  // Turbo-ready listeners
  document.addEventListener('turbo:load', initNavbar);
</script>

    <!-- Footer -->
    <footer class="mt-5 pt-4 pb-3 text-white" style="background-color: #4e0c88">
      <div class="container">

        <div class="row">
          <div class="col-md-4 mb-4">
            <div class="d-flex align-items-center mb-2">
              <%= image_tag "logo_white.png", alt: "MWI Logo", class: "navbar-logo"%>
              <h5 class="fw-bold mb-0">MWI University</h5>
            </div>
            <p class="small mb-0">
              Committed to excellence in education, research, and community service.
            </p>
          </div>

          <div class="col-md-2 mb-3">
            <h6 class="fw-semibold">Admission</h6>
            <ul class="list-unstyled small">
              <li><%= link_to "Departments", departments_path, class: "text-white text-decoration-none" %></li>
              <li><%= link_to "Teachers", teachers_path, class: "text-white text-decoration-none" %></li>
              <li><%= link_to "Students", students_path, class: "text-white text-decoration-none" %></li>
              <li><%= link_to "Guardians", guardians_path, class: "text-white text-decoration-none" %></li>
            </ul>
          </div>

          <div class="col-md-2 mb-3">
            <h6 class="fw-semibold">Academics</h6>
            <ul class="list-unstyled small">
              <li><%= link_to "Sections", sections_path, class: "text-white text-decoration-none" %></li>
              <li><%= link_to "Subjects", subjects_path, class: "text-white text-decoration-none" %></li>
              <li><%= link_to "Classlists", classlists_path, class: "text-white text-decoration-none" %></li>
            </ul>
          </div>

          <div class="col-md-2 mb-3">
            <h6 class="fw-semibold">More</h6>
            <ul class="list-unstyled small">
              <li><%= link_to "Staffs", staffs_path, class: "text-white text-decoration-none" %></li>
            </ul>
          </div>

          <div class="col-md-2 mb-3">
            <h6 class="fw-semibold">Connect</h6>
            <ul class="list-unstyled small">
              <li><a href="#" class="text-white text-decoration-none">About Us</a></li>
              <li><a href="#" class="text-white text-decoration-none">Facebook</a></li>
              <li><a href="#" class="text-white text-decoration-none">Twitter</a></li>
              <li><a href="#" class="text-white text-decoration-none">Instagram</a></li>
            </ul>
          </div>
        </div>

        <div class="text-center pt-3 border-top border-secondary small">
          Â© <%= Time.zone.now.year %> MWI University. All rights reserved.
        </div>
      </div>
    </footer>
  </body>
</html>