<div class="n-wrapper">
  <div class="n-card">
    <div class="d-flex justify-content-between align-items-start">
      <div>
        <h1 class="mb-2 m-0"><%= @subject.name %></h1>
        <div class="n-meta text-muted" style="font-size:0.9rem; margin-bottom:12px;">
          <%= @subject.teacher.name %> &nbsp;|&nbsp; <%= @subject.number_of_units %> Units
        </div>
      </div>
      <%= link_to "Edit Details", edit_subject_path(@subject), class: "btn-n btn-peach" %> 
    </div>

    <div class="n-card-body">
      <div style="display:flex; gap:24px; align-items:flex-start;">
        <div style="flex:1; solid #ddd; padding-right:12px;">
          <p style="margin:0 0 12px;"><strong>Total Assessment:</strong> ₱<%= number_with_precision(@student.total_assessment, precision: 2, delimiter: ',') %></p>
          <p style="margin:0 0 0;"><strong>Total Units:</strong> <%= @student.number_of_units %></p>
        </div>
      </div>
    </div>
  </div>

  <div class="n-card department-card">
    <details>
      <summary style="font-weight:600; font-size:1.2rem; ">SECTIONS</summary>
      
        <% @subject.sections.each do |section| %>
          <div style="display:flex; gap:24px; align-items:flex-start;">
            <div style="flex:1; solid #ddd; padding-right:12px;">      
            <p><strong>Section:</strong> <%= section.name %></p>
            <p><strong>Room:</strong> <%= section.room %></p>
            <p><strong>Time Slot:</strong> <%= section.time_slot %></p>
            <p><strong>Number of Students:</strong> <%= section.number_of_students %></p>

            <table class="n-table" style="margin-top:15px;">
              <thead>
                <tr>
                  <th>STUDENT NAME</th>
                  <th>PROGRAM</th>
                  <th>YEAR LEVEL</th>
                </tr>
              </thead>
              <tbody>
                <% @sections.classlists.each do |classlist| %>
                  <tr>
                    <td><strong><%= classlist.student.name %></td>
                    <td><%= classlist.student.program %></td>
                    <td><%= classlist.student.year_level %></td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </details>
        </div>

  <div class="d-flex justify-content-between align-items-center mt-4">
    <%= link_to "← Back to Students", students_path, class: "btn-n btn-grey" %>
    <%= button_to "Delete Student", @student, method: :delete, data: { confirm: "Are you sure?" }, class: "btn-n btn-pink" %>
  </div>
</div>